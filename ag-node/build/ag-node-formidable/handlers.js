function start(e){console.log("request handler start was called ...");var t='<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body><h3>Simple Text Input</h3><form action="/input" method="post"><textarea name="text" rows="5" cols="60"></textarea><br><input type="submit" value="submit" /><br></form><h3>Simple File Upload</h3><form action="/upload" enctype="multipart/form-data" method="post"><input type="file" name="upload"><br><input type="submit" value="submit" /></form></body></html>';e.writeHead(200,{"Content-type":"text/html"}),e.write(t),e.end()}function input(e,t){console.log("request handler input was called ...");var o=new formidable.IncomingForm;console.log("about to parse ..."),o.parse(t,function(t,o){console.log("parsing done ..."),e.writeHead(200,{"Content-Type":"text/html"}),e.write(util.inspect(o)),e.end()})}function upload(e,t){console.log("request handler upload was called ...");var o=new formidable.IncomingForm;console.log("about to parse ..."),o.parse(t,function(t,o,n){console.log("parsing done ..."),fs.rename(n.upload.path,"/tmp/test.png",function(e){e&&(fs.unlink("/tmp/test.png"),fs.rename(n.upload.path,"/tmp/test.png"))}),e.writeHead(200,{"Content-Type":"text/html"}),e.write("received image: <br/>"),e.write('<img src="/show" />'),e.end()})}function show(e){console.log("request handler show was called..."),e.writeHead(200,{"Content-Type":"image/png"}),fs.createReadStream("/tmp/test.png").pipe(e)}var querystring=require("querystring"),fs=require("fs"),util=require("util"),formidable=require("formidable");exports.start=start,exports.input=input,exports.upload=upload,exports.show=show;